---
title: tmux åŸºç¡€æ“ä½œ
date: 2021-08-25
tags:
  - tmux
---

tmux æ˜¯ linux å·¥ä½œç¯å¢ƒä¸‹çš„åŸºç¡€å·¥å…·ï¼Œç†Ÿç»ƒä½¿ç”¨æ˜¯å¿…é¡»çš„

![20210826002716-2021-08-26-00-27-19](https://raw.githubusercontent.com/fengwei2002/Pictures_02/master/images/20210826002716-2021-08-26-00-27-19.png)

ä¸€ä¸ª tmux å¯ä»¥åŒ…å«å¤šä¸ª sessionï¼Œä¸€ä¸ª session å¯ä»¥åŒ…å«å¤šä¸ª windowï¼Œä¸€ä¸ª window å¯ä»¥åŒ…å«å¤šä¸ª paneã€‚ä¸€èˆ¬ä½¿ç”¨ session å’Œ pane ä¸¤ä¸ªç¯èŠ‚

![20210825113051-2021-08-25-11-30-56](https://raw.githubusercontent.com/fengwei2002/Pictures_02/master/images/20210825113051-2021-08-25-11-30-56.png)

## ä¸»æ“ä½œ

ï¼ˆä¸€èˆ¬æƒ…å†µä¸‹é¦–å…ˆå°†ä¸»æ“ä½œé”® ctrl b é‡å®šä¹‰åˆ° ctrl a ï¼‰

- <kbd>CTRL</kbd> + <kbd>b</kbd> <kbd>CTRL</kbd>-o è°ƒæ¢ç»ˆç«¯å·¦å³çª—å£ä½ç½®ï¼Œç±»ä¼¼ä¸ vim é‡Œçš„ <kbd>CTRL</kbd>-w
- <kbd>CTRL</kbd> + <kbd>b</kbd> %ï¼ˆshift + 5ï¼‰ çºµå‘åˆ†éš”çª—å£
- <kbd>CTRL</kbd> + <kbd>b</kbd> "ï¼ˆshift + 'ï¼‰ æ¨ªå‘åˆ†éš”çª—å£
- <kbd>CTRL</kbd>-dï¼šå…³é—­å½“å‰ paneï¼›å¦‚æœå½“å‰ window çš„æ‰€æœ‰ pane å‡å·²å…³é—­ï¼Œåˆ™è‡ªåŠ¨å…³é—­ windowï¼›å¦‚æœå½“å‰ session çš„æ‰€æœ‰ window å‡å·²å…³é—­ï¼Œåˆ™è‡ªåŠ¨å…³é—­ sessionã€‚
- <kbd>CTRL</kbd> + <kbd>b</kbd> ä¸Šä¸‹å·¦å³ï¼štmux å…‰æ ‡åœ¨çª—å£çš„ç§»åŠ¨
- <kbd>CTRL</kbd> + <kbd>b</kbd>-ä¸Šä¸‹å·¦å³ï¼šè°ƒæ•´ pane ä¹‹é—´åˆ†å‰²çº¿çš„ä½ç½®
- <kbd>CTRL</kbd> + <kbd>b</kbd>, sï¼šåˆ—å‡º session ç›®å½•ã€‚
    æ–¹å‘é”® â€”â€” ä¸Šï¼šé€‰æ‹©ä¸Šä¸€é¡¹ session/window/pane
    æ–¹å‘é”® â€”â€” ä¸‹ï¼šé€‰æ‹©ä¸‹ä¸€é¡¹ session/window/pane
    æ–¹å‘é”® â€”â€” å³ï¼šå±•å¼€å½“å‰é¡¹ session/window
    æ–¹å‘é”® â€”â€” å·¦ï¼šé—­åˆå½“å‰é¡¹ session/window
- <kbd>CTRL</kbd> + <kbd>b</kbd>, wï¼šåˆ—å‡º Windows ç›®å½•
- <kbd>CTRL</kbd> + <kbd>b</kbd>, c: åœ¨å½“å‰çš„ session ä¸­æ–°å»ºä¸€ä¸ª Windows
- <kbd>CTRL</kbd> + <kbd>b</kbd>ï¼Œd æŒ‚èµ·å½“å‰ session
- tmux a æ‰“å¼€ä¹‹å‰æŒ‚èµ·çš„ session
- <kbd>CTRL</kbd> + <kbd>b</kbd>, c åœ¨å½“å‰çš„ session ä¸­åˆ›å»ºä¸€ä¸ªæ–°çš„ Windows 
- <kbd>CTRL</kbd> + <kbd>b</kbd>, ï¼Ÿæ‰“å¼€å¸®åŠ©æ–‡æ¡£
- Alt + ä¸Šä¸‹ï¼Œ åœ¨ linux ä¸­è¿›è¡Œç¿»é¡µ

## ä¼šè¯

tmux new åˆ›å»ºé»˜è®¤åç§°çš„ä¼šè¯
tmux new -s mysession åˆ›å»º mysession çš„ä¼šè¯
tmux ls ä»¥æ–‡æœ¬å½¢å¼è¾“å‡ºä¼šè¯åˆ—è¡¨

tmux aã€€ã€€è¿æ¥ä¸Šä¸€ä¸ªä¼šè¯
tmux a -t mysessionã€€ã€€è¿æ¥æŒ‡å®šä¼šè¯

tmux rename -t s1 s2ã€€ã€€é‡å‘½åä¼šè¯ s1 ä¸º s2

tmux kill-sessionã€€ã€€å…³é—­ä¸Šæ¬¡æ‰“å¼€çš„ä¼šè¯
tmux kill-session -t s1ã€€ã€€å…³é—­ä¼šè¯ s1
tmux kill-session -t ä¼šè¯å
tmux kill-session -a -t s1ã€€ã€€å…³é—­é™¤ s1 å¤–çš„æ‰€æœ‰ä¼šè¯
tmux kill-serverã€€ã€€å…³é—­æ‰€æœ‰ä¼šè¯

ctrl+b sã€€ã€€åˆ—å‡ºä¼šè¯ï¼Œå¯è¿›è¡Œåˆ‡æ¢
ctrl+b $ã€€ã€€é‡å‘½åå½“å‰ä¼šè¯

## å…¶ä»–å‘½ä»¤

<kbd>C-b == CTRL + b </kbd>
- C-b z å…¨å±å½“å‰ paneï¼Œ å†æ¬¡æ“ä½œæ¢å¤å¸ƒå±€
- C-b ! æŠŠå½“å‰çª—å£å˜ä¸ºæ–°çª—å£
- C-b q æ˜¾ç¤ºåˆ†éš”çª—å£çš„ç¼–å·
- C-b o è·³åˆ°ä¸‹ä¸€ä¸ªåˆ†éš”çª—å£
- C-b ä¸Šä¸‹é”® ä¸Šä¸€ä¸ªåŠä¸‹ä¸€ä¸ªåˆ†éš”çª—å£
- C-b C-æ–¹å‘é”® è°ƒæ•´åˆ†éš”çª—å£å¤§å°
- C-b c åˆ›å»ºæ–°çª—å£
- C-b 0~9 é€‰æ‹©å‡ å·çª—å£
- C-b c åˆ›å»ºæ–°çª—å£
- C-b n é€‰æ‹©ä¸‹ä¸€ä¸ªçª—å£
- C-b l åˆ‡æ¢åˆ°æœ€åä½¿ç”¨çš„çª—å£
- C-b p é€‰æ‹©å‰ä¸€ä¸ªçª—å£
- C-b w ä»¥èœå•æ–¹å¼æ˜¾ç¤ºåŠé€‰æ‹©çª—å£
- C-b t æ˜¾ç¤ºæ—¶é’Ÿ
- C-b ; åˆ‡æ¢åˆ°æœ€åä¸€ä¸ªä½¿ç”¨çš„é¢æ¿
- C-b x å…³é—­é¢æ¿
- C-b & å…³é—­çª—å£
- C-b s ä»¥èœå•æ–¹å¼æ˜¾ç¤ºå’Œé€‰æ‹©ä¼šè¯
- C-b d é€€å‡º tumxï¼Œå¹¶ä¿å­˜å½“å‰ä¼šè¯ï¼Œè¿™æ—¶ï¼Œtmux ä»åœ¨åå°è¿è¡Œï¼Œå¯ä»¥é€šè¿‡ tmux attach è¿›å…¥ åˆ°æŒ‡å®šçš„ä¼šè¯

## æ–‡æœ¬å¤åˆ¶æ¨¡å¼ï¼š

æŒ‰ä¸‹ `PREFIX-[` è¿›å…¥æ–‡æœ¬å¤åˆ¶æ¨¡å¼ã€‚å¯ä»¥ä½¿ç”¨æ–¹å‘é”®åœ¨å±å¹•ä¸­ç§»åŠ¨å…‰æ ‡ã€‚é»˜è®¤æƒ…å†µä¸‹ï¼Œæ–¹å‘é”®æ˜¯å¯ç”¨çš„ã€‚åœ¨é…ç½®æ–‡ä»¶ä¸­å¯ç”¨ Vim é”®ç›˜å¸ƒå±€æ¥åˆ‡æ¢çª—å£ã€è°ƒæ•´çª—æ ¼å¤§å°ã€‚Tmux ä¹Ÿæ”¯æŒ Vi æ¨¡å¼ã€‚è¦æ˜¯æƒ³å¯ç”¨ Vi æ¨¡å¼ï¼Œåªéœ€è¦æŠŠä¸‹é¢è¿™ä¸€è¡Œæ·»åŠ åˆ° .tmux.conf ä¸­ï¼š

    setw -g mode-keys vi

å¯ç”¨è¿™æ¡é…ç½®åï¼Œå°±å¯ä»¥ä½¿ç”¨ hã€jã€kã€l æ¥ç§»åŠ¨å…‰æ ‡äº†ã€‚

æƒ³è¦é€€å‡ºæ–‡æœ¬å¤åˆ¶æ¨¡å¼çš„è¯ï¼ŒæŒ‰ä¸‹å›è½¦é”®å°±å¯ä»¥äº†ã€‚ç„¶åæŒ‰ä¸‹ `PREFIX-]` ç²˜è´´åˆšæ‰å¤åˆ¶çš„æ–‡æœ¬ã€‚


## é…ç½®é€‰é¡¹ï¼š

    # é¼ æ ‡æ”¯æŒ - è®¾ç½®ä¸º on æ¥å¯ç”¨é¼ æ ‡(ä¸ 2.1 ä¹‹å‰çš„ç‰ˆæœ¬æœ‰åŒºåˆ«ï¼Œè¯·è‡ªè¡ŒæŸ¥é˜… man page)
    * set -g mouse on

    # è®¾ç½®é»˜è®¤ç»ˆç«¯æ¨¡å¼ä¸º 256color
    set -g default-terminal "screen-256color"

    # å¯ç”¨æ´»åŠ¨è­¦å‘Š
    setw -g monitor-activity on
    set -g visual-activity on

    # å±…ä¸­çª—å£åˆ—è¡¨
    set -g status-justify centre

## å‚è€ƒé…ç½®æ–‡ä»¶ï¼ˆ~/.tmux.confï¼‰ï¼š

```bash
# C-b æœ‰äº›ä¸åˆç†ï¼Œprefix é‡ç½®ä¸º ctrl a ğŸ¤“
set -g prefix C-a

set -g base-index         1     # çª—å£ç¼–å·ä» 1 å¼€å§‹è®¡æ•°
set -g display-panes-time 10000 # PREFIX-Q æ˜¾ç¤ºç¼–å·çš„é©»ç•™æ—¶é•¿ï¼Œå•ä½ ms
set -g mouse              on    # å¼€å¯é¼ æ ‡ ğŸ¤“
set -g pane-base-index    1     # çª—æ ¼ç¼–å·ä» 1 å¼€å§‹è®¡æ•°
set -g renumber-windows   on    # å…³æ‰æŸä¸ªçª—å£åï¼Œç¼–å·é‡æ’

setw -g allow-rename      off   # ç¦æ­¢æ´»åŠ¨è¿›ç¨‹ä¿®æ”¹çª—å£å
setw -g automatic-rename  off   # ç¦æ­¢è‡ªåŠ¨å‘½åæ–°çª—å£
setw -g mode-keys         vi    # è¿›å…¥å¤åˆ¶æ¨¡å¼çš„æ—¶å€™ä½¿ç”¨ vi é”®ä½ï¼ˆé»˜è®¤æ˜¯ EMACSï¼‰ğŸ¤“
```

## æ‡’äºº .tmux

![20210825214606-2021-08-25-21-46-11](https://raw.githubusercontent.com/fengwei2002/Pictures_02/master/images/20210825214606-2021-08-25-21-46-11.png)

githubæœ‰ä¸€ä¸ªæ¯”è¾ƒèŠ±å“¨çš„ä¸€ä¸ªï¼Œç›´æ¥ clone ä¸‹æ¥ç”¨å°±å¯ä»¥äº†ï¼š,ä¸»è¦ä¼˜åŒ–åº•éƒ¨æ ï¼Œæ²¡ä»€ä¹ˆå®é™…ç”¨é€”

https://github.com/gpakosz/.tmux

## æ’ä»¶

TODO tmux æ’ä»¶
> å·¥ä½œä¹‹åå†è¡¥å§ï¼Œ vim & tmux æ’ä»¶ç›¸å…³ï¼Œ ç°åœ¨å·²ç»å¤Ÿç”¨äº†