---
title: kotlin-è¿›é˜¶
date: 2020-12-19
tags:
    - kotlin
---

> ğŸŒ´ kotlin02: ç©ºå®‰å…¨ é€’å½’ å¼‚å¸¸ å°¾é€’å½’

<!-- more -->
## ç©ºå®‰å…¨

Kotlin çš„ç±»å‹ç³»ç»Ÿæ—¨åœ¨æ¶ˆé™¤æ¥è‡ªä»£ç ç©ºå¼•ç”¨çš„å±é™©ï¼Œä¹Ÿç§°ä¸º [åäº¿ç¾å…ƒçš„é”™è¯¯](https://en.wikipedia.org/wiki/Tony_Hoare#Apologies_and_retractions)


### kotlin NULL å¤„ç†æœºåˆ¶ ï¼š`ï¼Ÿ`

åœ¨ Kotlin é‡Œé¢ï¼Œæ‰€æœ‰çš„å˜é‡é»˜è®¤éƒ½æ˜¯ä¸å…è®¸ä¸ºç©ºçš„ï¼Œå¦‚æœä½ ç»™å®ƒèµ‹å€¼ nullï¼Œå°±ä¼šæŠ¥é”™

è¿™ç§æœ‰ç‚¹å¼ºç¡¬çš„è¦æ±‚ï¼Œå…¶å®æ˜¯å¾ˆåˆç†çš„ï¼šæ—¢ç„¶ä½ å£°æ˜äº†ä¸€ä¸ªå˜é‡ï¼Œå°±æ˜¯è¦ä½¿ç”¨å®ƒå¯¹å§ï¼Ÿé‚£ä½ æŠŠå®ƒèµ‹å€¼ä¸º null å¹²å˜›ï¼Ÿè¦å°½é‡è®©å®ƒæœ‰å¯ç”¨çš„å€¼å•Šã€‚Java åœ¨è¿™æ–¹é¢å¾ˆå®½æ¾ï¼Œæˆ‘ä»¬æˆäº†ä¹ æƒ¯ï¼Œä½† Kotlin æ›´å¼ºçš„é™åˆ¶å…¶å®åœ¨ä½ ç†Ÿæ‚‰äº†ä¹‹åï¼Œæ˜¯ä¼šå‡å°‘å¾ˆå¤šè¿è¡Œæ—¶çš„é—®é¢˜çš„ã€‚

ä¾‹å¦‚è¿™æ®µä»£ç ï¼š

```kt
fun main(args: Array<String>) {
   heat(null)
}
fun heat(str:String):String {
    return "çƒ­$str"
}
```

ç¼–è¯‘å™¨æŠ¥é”™ï¼šç©ºå€¼ä¸å¯ä»¥èµ‹ç»™ä¸æ˜¯ç©ºç±»å‹çš„ä¸€ä¸ªå˜é‡ï¼š

![2020-12-16-21-47-38](https://raw.githubusercontent.com/fengwei2002/Pictures_02/master/img/2020-12-16-21-47-38.png)

å‡½æ•°è®¾è®¡çš„æ—¶å€™å‚æ•°åé¢åŠ ä¸Š ï¼Ÿ å°±å¯ä»¥ä¼ å…¥ null å€¼

```kt
fun main(args: Array<String>) {
   heat(null)
}
fun heat(str: String?):String {  //åŠ ä¸Šé—®å·ä»£è¡¨å‚æ•°å¯ä»¥ä¸ºç©º
    return "çƒ­$str"
}
```

ç¼–è¯‘å™¨ä¸æŠ¥é”™ï¼š

![2020-12-16-21-50-54](https://raw.githubusercontent.com/fengwei2002/Pictures_02/master/img/2020-12-16-21-50-54.png)

å¯¹äºè¿™äº›å¯ä»¥ä¸ºç©ºå€¼çš„å˜é‡ï¼Œå¯ä»¥åœ¨ç±»å‹å³è¾¹åŠ ä¸€ä¸ª ? å·ï¼Œè§£é™¤å®ƒçš„éç©ºé™åˆ¶ï¼š

- å˜é‡ä»ç„¶éœ€è¦æ‰‹åŠ¨åˆå§‹åŒ–ï¼Œå¦‚æœä¸åˆå§‹åŒ–çš„è¯ä¼šæŠ¥é”™ï¼›
- ä¸é¢å¤–æ·»åŠ é—®å·çš„æ—¶å€™ç»™å˜é‡åˆå§‹åŒ–èµ‹å€¼ null çš„è¯æŠ¥é”™ï¼Œä¹‹åå†æ¬¡èµ‹å€¼ä¸º null ä¹Ÿä¼šæŠ¥é”™ï¼›å˜é‡ç”¨ ? è®¾ç½®ä¸ºå¯ç©ºçš„æ—¶å€™ï¼Œå¯ä»¥èµ‹å€¼ä¸º null

``` kt
fun main(args: Array<String>) {
    var a: String? = null
    test(a)
    a = "haha"
    test(a) /*null haha*/
}

fun test(input: String?) {  //è¿”å›å€¼åŒç†ï¼ŒåŠ  String ?
    println(input)
}
```

è®¿é—®å¯èƒ½ä¸ºç©ºçš„å˜é‡ç±»å‹çš„æ–¹æ³•æ—¶å°±ä¼šæŠ¥é”™


``` kt
var a: String = "abc" // é»˜è®¤æƒ…å†µä¸‹ï¼Œå¸¸è§„åˆå§‹åŒ–æ„å‘³ç€éç©º
a = null // ç¼–è¯‘é”™è¯¯
var b: String? = "abc" // å¯ä»¥è®¾ç½®ä¸ºç©º
b = null // ok
print(b)
val l = a.length //âœ”
val l = b.length // é”™è¯¯ï¼šå˜é‡â€œbâ€å¯èƒ½ä¸ºç©º
```

### åœ¨æ¡ä»¶ä¸­æ£€æµ‹ null `if`

ä½†æ˜¯ä»ç„¶æƒ³è®¿é—®å¯¹è±¡çš„æ–¹æ³•æ€ä¹ˆåŠï¼Ÿï¼š

é¦–å…ˆï¼Œä½ å¯ä»¥æ˜¾å¼æ£€æµ‹ b æ˜¯å¦ä¸º nullï¼Œå¹¶åˆ†åˆ«å¤„ç†ä¸¤ç§å¯èƒ½ï¼š

``` kt
val l = if (b != null) b.length else -1
```

ç¼–è¯‘å™¨ä¼šè·Ÿè¸ªæ‰€æ‰§è¡Œæ£€æµ‹çš„ä¿¡æ¯ï¼Œå¹¶å…è®¸ä½ åœ¨ if å†…éƒ¨è°ƒç”¨ lengthã€‚ åŒæ—¶ï¼Œä¹Ÿæ”¯æŒæ›´å¤æ‚ï¼ˆæ›´æ™ºèƒ½ï¼‰çš„æ¡ä»¶ï¼š


``` kt
fun main() {
    val b: String? = "Kotlin"
    if (b != null && b.length > 0) {
        print("String of length ${b.length}")
    } else {
        print("Empty string")
    }
}
```

è¯·æ³¨æ„ï¼Œè¿™åªé€‚ç”¨äº b æ˜¯ä¸å¯å˜çš„æƒ…å†µï¼ˆå³åœ¨æ£€æµ‹å’Œä½¿ç”¨ä¹‹é—´æ²¡æœ‰ä¿®æ”¹è¿‡çš„å±€éƒ¨å˜é‡ ï¼Œæˆ–è€…ä¸å¯è¦†ç›–å¹¶ä¸”æœ‰å¹•åå­—æ®µçš„ val æˆå‘˜ï¼‰ï¼Œå› ä¸ºå¦åˆ™å¯èƒ½ä¼šå‘ç”Ÿåœ¨æ£€æµ‹ä¹‹å b åˆå˜ä¸º null çš„æƒ…å†µã€‚

### å®‰å…¨çš„è°ƒç”¨ `?. let`

ä½ çš„ç¬¬äºŒä¸ªé€‰æ‹©æ˜¯å®‰å…¨è°ƒç”¨æ“ä½œç¬¦ï¼Œå†™ä½œ `?.`ï¼š


``` kt
fun main() {
    val a = "Kotlin"
    val b: String? = null
    println(b?.length)
    println(a?.length) // æ— éœ€å®‰å…¨è°ƒç”¨
}
```
å¦‚æœ b éç©ºï¼Œå°±è¿”å› b.lengthï¼Œå¦åˆ™è¿”å› nullï¼Œè¿™ä¸ªè¡¨è¾¾å¼çš„ç±»å‹æ˜¯ `Int?`ã€‚

å®‰å…¨è°ƒç”¨åœ¨é“¾å¼è°ƒç”¨ä¸­å¾ˆæœ‰ç”¨ã€‚ä¾‹å¦‚ï¼Œå¦‚æœä¸€ä¸ªå‘˜å·¥ Bob å¯èƒ½ä¼šï¼ˆæˆ–è€…ä¸ä¼šï¼‰åˆ†é…ç»™ä¸€ä¸ªéƒ¨é—¨ï¼Œ å¹¶ä¸”å¯èƒ½æœ‰å¦å¤–ä¸€ä¸ªå‘˜å·¥æ˜¯è¯¥éƒ¨é—¨çš„è´Ÿè´£äººï¼Œé‚£ä¹ˆè·å– Bob æ‰€åœ¨éƒ¨é—¨è´Ÿè´£äººï¼ˆå¦‚æœæœ‰çš„è¯ï¼‰çš„åå­—ï¼Œæˆ‘ä»¬å†™ä½œï¼š


``` kt
bob?.department?.head?.name
```
å¦‚æœä»»æ„ä¸€ä¸ªå±æ€§ï¼ˆç¯èŠ‚ï¼‰ä¸ºç©ºï¼Œè¿™ä¸ªé“¾å¼è°ƒç”¨å°±ä¼šè¿”å› nullã€‚

å¦‚æœè¦åªå¯¹éç©ºå€¼æ‰§è¡ŒæŸä¸ªæ“ä½œï¼Œå®‰å…¨è°ƒç”¨æ“ä½œç¬¦å¯ä»¥ä¸ [let](https://kotlinlang.org/api/latest/jvm/stdlib/kotlin/let.html) ä¸€èµ·ä½¿ç”¨ï¼š


``` kt
fun main() {
    val listWithNulls: List<String?> = listOf("Kotlin", null)
    for (item in listWithNulls) {
        item?.let { println(it) } // è¾“å‡º Kotlin å¹¶å¿½ç•¥ null
    }
}
```

å®‰å…¨è°ƒç”¨ä¹Ÿå¯ä»¥å‡ºç°åœ¨èµ‹å€¼çš„å·¦ä¾§ã€‚è¿™æ ·ï¼Œå¦‚æœè°ƒç”¨é“¾ä¸­çš„ä»»ä½•ä¸€ä¸ªæ¥æ”¶è€…ä¸ºç©ºéƒ½ä¼šè·³è¿‡èµ‹å€¼ï¼Œè€Œå³ä¾§çš„è¡¨è¾¾å¼æ ¹æœ¬ä¸ä¼šæ±‚å€¼ï¼š


``` kt
// å¦‚æœ `person` æˆ–è€… `person.department` å…¶ä¸­ä¹‹ä¸€ä¸ºç©ºï¼Œéƒ½ä¸ä¼šè°ƒç”¨è¯¥å‡½æ•°ï¼š
person?.department?.head = managersPool.getManager()
```

### Elvis æ“ä½œç¬¦

å½“æˆ‘ä»¬æœ‰ä¸€ä¸ªå¯ç©ºçš„å¼•ç”¨ b æ—¶ï¼Œæˆ‘ä»¬å¯ä»¥è¯´â€œå¦‚æœ b éç©ºï¼Œæˆ‘ä½¿ç”¨å®ƒï¼›å¦åˆ™ä½¿ç”¨æŸä¸ªéç©ºçš„å€¼â€ï¼š


``` kt
val l: Int = if (b != null) b.length else -1
```

é™¤äº†å®Œæ•´çš„ if-è¡¨è¾¾å¼ï¼Œè¿™è¿˜å¯ä»¥é€šè¿‡ Elvis æ“ä½œç¬¦è¡¨è¾¾ï¼Œå†™ä½œ ?:ï¼š


``` kt
val l = b?.length ?: -1
```
å¦‚æœ `?:` å·¦ä¾§è¡¨è¾¾å¼éç©ºï¼Œelvis æ“ä½œç¬¦å°±è¿”å›å…¶å·¦ä¾§è¡¨è¾¾å¼ï¼Œå¦åˆ™è¿”å›å³ä¾§è¡¨è¾¾å¼ã€‚ 
è¯·æ³¨æ„ï¼Œå½“ä¸”ä»…å½“å·¦ä¾§ä¸ºç©ºæ—¶ï¼Œæ‰ä¼šå¯¹å³ä¾§è¡¨è¾¾å¼æ±‚å€¼ã€‚

è¯·æ³¨æ„ï¼Œå› ä¸º throw å’Œ return åœ¨ Kotlin ä¸­éƒ½æ˜¯è¡¨è¾¾å¼ï¼Œæ‰€ä»¥å®ƒä»¬ä¹Ÿå¯ä»¥ç”¨åœ¨ elvis æ“ä½œç¬¦å³ä¾§ã€‚è¿™å¯èƒ½ä¼šéå¸¸æ–¹ä¾¿ï¼Œä¾‹å¦‚ï¼Œæ£€æµ‹å‡½æ•°å‚æ•°ï¼š


``` kt
fun foo(node: Node): String? {
    val parent = node.getParent() ?: return null
    val name = node.getName() ?: throw IllegalArgumentException("name expected")
    // â€¦â€¦
}
```
### !! æ“ä½œç¬¦

ç¬¬ä¸‰ç§é€‰æ‹©æ˜¯ä¸º NPE çˆ±å¥½è€…å‡†å¤‡çš„ï¼šéç©ºæ–­è¨€è¿ç®—ç¬¦ï¼ˆ!!ï¼‰å°†ä»»ä½•å€¼è½¬æ¢ä¸ºéç©ºç±»å‹ï¼Œè‹¥è¯¥å€¼ä¸ºç©ºåˆ™æŠ›å‡ºå¼‚å¸¸ã€‚æˆ‘ä»¬å¯ä»¥å†™ b!! ï¼Œè¿™ä¼šè¿”å›ä¸€ä¸ªéç©ºçš„ b å€¼ ï¼ˆä¾‹å¦‚ï¼šåœ¨æˆ‘ä»¬ä¾‹å­ä¸­çš„ Stringï¼‰æˆ–è€…å¦‚æœ b ä¸ºç©ºï¼Œå°±ä¼šæŠ›å‡ºä¸€ä¸ª NPE å¼‚å¸¸ï¼š


``` kt
val l = b!!.length
```
å› æ­¤ï¼Œå¦‚æœä½ æƒ³è¦ä¸€ä¸ª NPEï¼Œä½ å¯ä»¥å¾—åˆ°å®ƒï¼Œä½†æ˜¯ä½ å¿…é¡»æ˜¾å¼è¦æ±‚å®ƒï¼Œå¦åˆ™å®ƒä¸ä¼šä¸æœŸè€Œè‡³ã€‚

### å®‰å…¨çš„ç±»å‹è½¬æ¢

å¦‚æœå¯¹è±¡ä¸æ˜¯ç›®æ ‡ç±»å‹ï¼Œé‚£ä¹ˆå¸¸è§„ç±»å‹è½¬æ¢å¯èƒ½ä¼šå¯¼è‡´ ClassCastException(ç±»è½¬æ¢å¼‚å¸¸)ã€‚ å¦ä¸€ä¸ªé€‰æ‹©æ˜¯ä½¿ç”¨å®‰å…¨çš„ç±»å‹è½¬æ¢ï¼Œå¦‚æœå°è¯•è½¬æ¢ä¸æˆåŠŸåˆ™è¿”å› nullï¼š

``` kt
val aInt: Int? = a as? Int
```

### å¯ç©ºç±»å‹çš„é›†åˆ

å¦‚æœä½ æœ‰ä¸€ä¸ªå¯ç©ºç±»å‹å…ƒç´ çš„é›†åˆï¼Œå¹¶ä¸”æƒ³è¦è¿‡æ»¤éç©ºå…ƒç´ ï¼Œä½ å¯ä»¥ä½¿ç”¨ filterNotNull æ¥å®ç°ï¼š

``` kt
val nullableList: List<Int?> = listOf(1, 2, null, 4)
val intList: List<Int> = nullableList.filterNotNull()
```

Listå¯¹è±¡çš„æ–¹æ³• ï¼š filterNotNull


## å‡½æ•°

ä¸ç”¨åƒ cpp ä¸­çš„å‡½æ•°å£°æ˜è¯­æ³•è§„åˆ™ï¼Œå†™åœ¨åé¢çš„å‡½æ•°åœ¨ main å‡½æ•°ä¸­ä¹Ÿå¯ä»¥è¿›è¡Œè°ƒç”¨ï¼Œè‡ªå®šä¹‰å‡½æ•°å’Œ main å‡½æ•°ä¸åˆ†å…ˆåé¡ºåº

kotlin å‡½æ•°æ¡†æ¶ï¼š

``` kt
fun å‡½æ•°åï¼ˆå‚æ•°åï¼šå‚æ•°ç±»å‹ï¼‰ï¼šè¿”å›å€¼ç±»å‹ {  
    å‡½æ•°ä½“  
}
```

### å®šä¹‰å‡½æ•°ï¼š

``` kt
fun printstar (){ //è¿”å›å€¼ä¸å†™å°±æ˜¯ kotlin.Unit
    println("*")  //è¿”å›å€¼ç±»å‹ä¸º Unit ä»£è¡¨æ— è¿”å›å€¼ï¼Œå¯ä»¥çœç•¥ä¸å†™
}
```

### ä½¿ç”¨å‡½æ•°ï¼š

è°ƒç”¨å‡½æ•°ä½¿ç”¨ä¼ ç»Ÿçš„æ–¹æ³•ï¼š

``` kt
fun main(args: Array<String>){
    println("hello world")
    println(sayhello("fengwei"))
}

fun sayhello(name:String):String{
    return "hello"+name
}
```

è°ƒç”¨æˆå‘˜å‡½æ•°ä½¿ç”¨ç‚¹è¡¨ç¤ºæ³•ï¼š

``` kt
Stream().read() // åˆ›å»ºç±» Stream å®ä¾‹å¹¶è°ƒç”¨ read()
```

### å‚æ•°

å‡½æ•°å‚æ•°ä½¿ç”¨ Pascal è¡¨ç¤ºæ³•å®šä¹‰ï¼Œå³ name: typeã€‚å‚æ•°ç”¨é€—å·éš”å¼€ã€‚ æ¯ä¸ªå‚æ•°å¿…é¡»æœ‰æ˜¾å¼ç±»å‹ï¼š

``` kt
fun powerOf(number: Int, exponent: Int): Int { /*â€¦â€¦*/ }

fun powerOf(
    number: Int,
    exponent: Int, // trailing comma
) { /*...*/ }
```

### é»˜è®¤å‚æ•°å’Œå…·åå‚æ•°

å‡½æ•°å‚æ•°å¯ä»¥æœ‰é»˜è®¤å€¼ï¼Œå½“çœç•¥ç›¸åº”çš„å‚æ•°æ—¶ä½¿ç”¨é»˜è®¤å€¼ã€‚ä¸å…¶ä»–è¯­è¨€ç›¸æ¯”ï¼Œè¿™å¯ä»¥å‡å°‘é‡è½½æ•°é‡ï¼š

Kotlin é»˜è®¤å‚æ•°æ˜¯é€šè¿‡ç±»å‹åé¢çš„ `=` æ¥å®šä¹‰é»˜è®¤å‚æ•°çš„


``` kt
fun read(
    b: Array<Byte>, 
    off: Int = 0, 
    len: Int = b.size,
) { /*â€¦â€¦*/ }
```

é‡å†™å‡½æ•°çš„æ—¶å€™æ€»æ˜¯ä½¿ç”¨ä¸åŸºç±»å‹æ–¹æ³•ç›¸åŒçš„é»˜è®¤å‚æ•°å€¼ã€‚ å½“è¦†ç›–ä¸€ä¸ªå¸¦æœ‰é»˜è®¤å‚æ•°å€¼çš„æ–¹æ³•æ—¶ï¼Œå¿…é¡»ä»ç­¾åä¸­çœç•¥é»˜è®¤å‚æ•°å€¼ï¼š

``` kt
open class A {
    open fun foo(i: Int = 10) { /*â€¦â€¦*/ }
}

class B : A() {
    override fun foo(i: Int) { /*â€¦â€¦*/ }  // ä¸èƒ½æœ‰é»˜è®¤å€¼
}
```

å¦‚æœä¸€ä¸ªé»˜è®¤å‚æ•°åœ¨ä¸€ä¸ªæ— é»˜è®¤å€¼çš„å‚æ•°ä¹‹å‰ï¼Œé‚£ä¹ˆè¯¥é»˜è®¤å€¼åªèƒ½é€šè¿‡ä½¿ç”¨å…·åå‚æ•°è°ƒç”¨è¯¥å‡½æ•°æ¥ä½¿ç”¨ï¼š


``` kt
fun foo(
    bar: Int = 0, 
    baz: Int,
) { /*â€¦â€¦*/ }

foo(baz = 1) // ä½¿ç”¨é»˜è®¤å€¼ bar = 0
```

å¦‚æœåœ¨é»˜è®¤å‚æ•°ä¹‹åçš„æœ€åä¸€ä¸ªå‚æ•°æ˜¯ lambda è¡¨è¾¾å¼ï¼Œé‚£ä¹ˆå®ƒæ—¢å¯ä»¥ä½œä¸ºå…·åå‚æ•°åœ¨æ‹¬å·å†…ä¼ å…¥ï¼Œä¹Ÿå¯ä»¥åœ¨æ‹¬å·å¤–ä¼ å…¥ï¼š

``` kt
fun foo(
    bar: Int = 0,
    baz: Int = 1,
    qux: () -> Unit,
) { /*â€¦â€¦*/ }

foo(1) { println("hello") }     // ä½¿ç”¨é»˜è®¤å€¼ baz = 1
foo(qux = { println("hello") }) // ä½¿ç”¨ä¸¤ä¸ªé»˜è®¤å€¼ bar = 0 ä¸ baz = 1
foo { println("hello") }        // ä½¿ç”¨ä¸¤ä¸ªé»˜è®¤å€¼ bar = 0 ä¸ baz = 1
```


``` kt
val Pi = 3.1415926  //ç±»ä¼¼äºå®šä¹‰ä¸€ä¸ªå®
fun main(args: Array<String>) {
    var ans = è·å–åœ†çš„é¢ç§¯ï¼ˆåŠå¾„ = 3.0f) 
    //åœ¨å‡½æ•°å‚æ•°ä¸­ç»™å‚æ•°èµ‹å€¼ ï¼šå…·åå‚æ•°ï¼Œå·²ç»å­˜åœ¨çš„é‚£äº›å€¼å°±ä¸ç”¨å†å†™äº†
    //ä½¿ç”¨ Float æµ®ç‚¹æ•°è¦åœ¨åé¢åŠ  f
    println(ans)
}

fun è·å–åœ†çš„é¢ç§¯ (PI: Double = Pi, åŠå¾„ï¼šFloat): Double {
    return PI * åŠå¾„ * åŠå¾„ 
    //double å’Œ float ä¸èƒ½æ··ç”¨ï¼Œä¸¥æ ¼ç±»å‹å£°æ˜ï¼Œå¦åˆ™ä¼šæŠ¥é”™
} 
```

å‡½æ•°åå’Œå˜é‡åèƒ½ç”¨æ±‰å­— wdfï¼Ÿï¼Ÿï¼Ÿ ï¼Œç‰›çš®


### å•è¡¨è¾¾å¼å‡½æ•°

```kt
fun main(args: Array<String>) {
   var result =add(3,5)
    println(result)
}

fun add (a:Int,b:Int){
    return a+b
}
```

å½“å‡½æ•°åªæœ‰ return ä¸€è¡Œè¯­å¥æ—¶

å¯ä»¥ç®€åŒ–ä¸º = å£°æ˜å‡½æ•°

``` kt
fun main(args: Array<String>) {
    var result = add(3, 5)
    println(result)
}

fun add(a: Int, b: Int) = a + b 
public fun sum(a: Int, b: Int): Int = a + b   // public æ–¹æ³•åˆ™å¿…é¡»æ˜ç¡®å†™å‡ºè¿”å›ç±»å‹
```

æ— è¿”å›å€¼çš„å‡½æ•°ï¼ˆç±»ä¼¼ Java ä¸­çš„ void)ï¼š

``` kt
fun printSum(a: Int, b: Int): Unit { 
    print(a + b)
}

// å¦‚æœæ˜¯è¿”å› Unit ç±»å‹ï¼Œåˆ™å¯ä»¥çœç•¥ï¼ˆå¯¹äº public æ–¹æ³•ä¹Ÿæ˜¯è¿™æ ·ï¼‰ï¼š
public fun printSum(a: Int, b: Int) { 
    print(a + b)
}
```

### æ˜¾å¼è¿”å›ç±»å‹

å…·æœ‰å—ä»£ç ä½“çš„å‡½æ•°å¿…é¡»å§‹ç»ˆæ˜¾å¼æŒ‡å®šè¿”å›ç±»å‹ï¼Œé™¤éä»–ä»¬æ—¨åœ¨è¿”å› Unitï¼ŒKotlin ä¸æ¨æ–­å…·æœ‰å—ä»£ç ä½“çš„å‡½æ•°çš„è¿”å›ç±»å‹ï¼Œå› ä¸ºè¿™æ ·çš„å‡½æ•°åœ¨ä»£ç ä½“ä¸­å¯èƒ½æœ‰å¤æ‚çš„æ§åˆ¶æµï¼Œå¹¶ä¸”è¿”å›ç±»å‹å¯¹äºè¯»è€…ï¼ˆæœ‰æ—¶ç”šè‡³å¯¹äºç¼–è¯‘å™¨ï¼‰æ˜¯ä¸æ˜æ˜¾çš„ã€‚

### å¯å˜æ•°é‡çš„å‚æ•°ï¼ˆVarargsï¼‰

å‡½æ•°çš„å‚æ•°ï¼ˆé€šå¸¸æ˜¯æœ€åä¸€ä¸ªï¼‰å¯ä»¥ç”¨ vararg ä¿®é¥°ç¬¦æ ‡è®°ï¼š


``` kt
fun <T> asList(vararg ts: T): List<T> {
    val result = ArrayList<T>()
    for (t in ts) // ts is an Array
        result.add(t)
    return result
}
```
å…è®¸å°†å¯å˜æ•°é‡çš„å‚æ•°ä¼ é€’ç»™å‡½æ•°ï¼š


``` kt
val list = asList(1, 2, 3)
```

``` kt
fun vars(vararg v: Int) {
    for (vt in v) {
        print(vt)
    }
}

// æµ‹è¯•
fun main(args: Array<String>) {
    vars(1, 2, 3, 4, 5)  // è¾“å‡º 123455
    vars(5)      //print å‡½æ•°ä¸è¿›è¡Œæ¢è¡Œ
}
```



è¿˜æœ‰å¦å¤–ä¸¤ç§ç”¨å˜é‡å®šä¹‰å‡½æ•°çš„å†™æ³•ï¼ˆå‡½æ•°å¼ç¼–ç¨‹çš„æ”¯æŒï¼‰

``` kt
fun main(args: Array<String>) {
    var result = add(3, 5)
    println(result)
    var i = { x: Int, y: Int -> x + y }  //å˜é‡ä½œä¸ºå‡½æ•°

    var result2 = i(3, 5)                //å½“ä½œå‡½æ•°ä½¿ç”¨
    println(result2)                     //è¿™ç§å†™æ³•å«åšå‡½æ•°è¡¨è¾¾å¼

    var j: (Int, Int) -> Int = { x, y -> x + y }
    var result3 = j(3, 5)
    println(result3)
}

fun add(a: Int, b: Int) = a + b
```

åœ¨å‡½æ•°å†…éƒ¨ï¼Œç±»å‹ T çš„ vararg å‚æ•°çš„å¯è§æ–¹å¼æ˜¯ä½œä¸º T æ•°ç»„ï¼Œå³ä¸Šä¾‹ä¸­çš„ ts å˜é‡å…·æœ‰ç±»å‹ Array <out T>ã€‚

åªæœ‰ä¸€ä¸ªå‚æ•°å¯ä»¥æ ‡æ³¨ä¸º varargã€‚å¦‚æœ vararg å‚æ•°ä¸æ˜¯åˆ—è¡¨ä¸­çš„æœ€åä¸€ä¸ªå‚æ•°ï¼Œ å¯ä»¥ä½¿ç”¨å…·åå‚æ•°è¯­æ³•ä¼ é€’å…¶åçš„å‚æ•°çš„å€¼ï¼Œæˆ–è€…ï¼Œå¦‚æœå‚æ•°å…·æœ‰å‡½æ•°ç±»å‹ï¼Œåˆ™é€šè¿‡åœ¨æ‹¬å·å¤–éƒ¨ä¼ ä¸€ä¸ª lambdaã€‚

å½“æˆ‘ä»¬è°ƒç”¨ vararg-å‡½æ•°æ—¶ï¼Œæˆ‘ä»¬å¯ä»¥ä¸€ä¸ªæ¥ä¸€ä¸ªåœ°ä¼ å‚ï¼Œä¾‹å¦‚ asList(1, 2, 3)ï¼Œæˆ–è€…ï¼Œå¦‚æœæˆ‘ä»¬å·²ç»æœ‰ä¸€ä¸ªæ•°ç»„å¹¶å¸Œæœ›å°†å…¶å†…å®¹ä¼ ç»™è¯¥å‡½æ•°ï¼Œæˆ‘ä»¬ä½¿ç”¨ä¼¸å±•ï¼ˆspreadï¼‰æ“ä½œç¬¦ï¼ˆåœ¨æ•°ç»„å‰é¢åŠ  *ï¼‰ï¼š

``` kt
val a = arrayOf(1, 2, 3)
val list = asList(-1, 0, *a, 4)
```
### ä¸­ç¼€è¡¨ç¤ºæ³•

æ ‡æœ‰ infix å…³é”®å­—çš„å‡½æ•°ä¹Ÿå¯ä»¥ä½¿ç”¨ä¸­ç¼€è¡¨ç¤ºæ³•ï¼ˆå¿½ç•¥è¯¥è°ƒç”¨çš„ç‚¹ä¸åœ†æ‹¬å·ï¼‰è°ƒç”¨ã€‚ä¸­ç¼€å‡½æ•°å¿…é¡»æ»¡è¶³ä»¥ä¸‹è¦æ±‚ï¼š

- å®ƒä»¬å¿…é¡»æ˜¯æˆå‘˜å‡½æ•°æˆ–æ‰©å±•å‡½æ•°ï¼›
- å®ƒä»¬å¿…é¡»åªæœ‰ä¸€ä¸ªå‚æ•°ï¼›
- å…¶å‚æ•°ä¸å¾—æ¥å—å¯å˜æ•°é‡çš„å‚æ•°ä¸”ä¸èƒ½æœ‰é»˜è®¤å€¼ã€‚ varargï¼†é»˜è®¤å‚æ•°


``` kt
infix fun Int.shl(x: Int): Int { â€¦â€¦ }

// ç”¨ä¸­ç¼€è¡¨ç¤ºæ³•è°ƒç”¨è¯¥å‡½æ•°
1 shl 2

// ç­‰åŒäºè¿™æ ·
1.shl(2)
```
ä¸­ç¼€å‡½æ•°è°ƒç”¨çš„ä¼˜å…ˆçº§ä½äºç®—æœ¯æ“ä½œç¬¦ã€ç±»å‹è½¬æ¢ä»¥åŠ rangeTo æ“ä½œç¬¦ã€‚ ä»¥ä¸‹è¡¨è¾¾å¼æ˜¯ç­‰ä»·çš„ï¼š

- 1 shl 2 + 3 ç­‰ä»·äº 1 shl (2 + 3)
- 0 until n * 2 ç­‰ä»·äº 0 until (n * 2)
- xs union ys as Set<*> ç­‰ä»·äº xs union (ys as Set<*>)


å¦ä¸€æ–¹é¢ï¼Œä¸­ç¼€å‡½æ•°è°ƒç”¨çš„ä¼˜å…ˆçº§é«˜äºå¸ƒå°”æ“ä½œç¬¦ && ä¸ ||ã€is- ä¸ in- æ£€æµ‹ä»¥åŠå…¶ä»–ä¸€äº›æ“ä½œç¬¦ã€‚è¿™äº›è¡¨è¾¾å¼ä¹Ÿæ˜¯ç­‰ä»·çš„ï¼š

- a && b xor c ç­‰ä»·äº a && (b xor c)
- a xor b in c ç­‰ä»·äº (a xor b) in c

è¯·æ³¨æ„ï¼Œä¸­ç¼€å‡½æ•°æ€»æ˜¯è¦æ±‚æŒ‡å®šæ¥æ”¶è€…ä¸å‚æ•°ã€‚å½“ä½¿ç”¨ä¸­ç¼€è¡¨ç¤ºæ³•åœ¨å½“å‰æ¥æ”¶è€…ä¸Šè°ƒç”¨æ–¹æ³•æ—¶ï¼Œéœ€è¦æ˜¾å¼ä½¿ç”¨ thisï¼›ä¸èƒ½åƒå¸¸è§„æ–¹æ³•è°ƒç”¨é‚£æ ·çœç•¥ã€‚è¿™æ˜¯ç¡®ä¿éæ¨¡ç³Šè§£ææ‰€å¿…éœ€çš„ã€‚


``` kt
class MyStringCollection {
    infix fun add(s: String) { /*â€¦â€¦*/ }
    
    fun build() {
        this add "abc"   // æ­£ç¡®
        add("abc")       // æ­£ç¡®
        //add "abc"        // é”™è¯¯ï¼šå¿…é¡»æŒ‡å®šæ¥æ”¶è€…
    }
}
```

### å‡½æ•°ä½œç”¨åŸŸ

åœ¨ Kotlin ä¸­å‡½æ•°å¯ä»¥åœ¨æ–‡ä»¶é¡¶å±‚å£°æ˜ï¼Œè¿™æ„å‘³ç€ä½ ä¸éœ€è¦åƒä¸€äº›è¯­è¨€å¦‚ Javaã€C# æˆ– Scala é‚£æ ·éœ€è¦åˆ›å»ºä¸€ä¸ªç±»æ¥ä¿å­˜ä¸€ä¸ªå‡½æ•°ã€‚æ­¤å¤–é™¤äº†é¡¶å±‚å‡½æ•°ï¼ŒKotlin ä¸­å‡½æ•°ä¹Ÿå¯ä»¥å£°æ˜åœ¨å±€éƒ¨ä½œç”¨åŸŸã€ä½œä¸ºæˆå‘˜å‡½æ•°ä»¥åŠæ‰©å±•å‡½æ•°ã€‚

### å±€éƒ¨å‡½æ•°

Kotlin æ”¯æŒå±€éƒ¨å‡½æ•°ï¼Œå³ä¸€ä¸ªå‡½æ•°åœ¨å¦ä¸€ä¸ªå‡½æ•°å†…éƒ¨ï¼š

``` kt
fun dfs(graph: Graph) {
    fun dfs(current: Vertex, visited: MutableSet<Vertex>) {
        if (!visited.add(current)) return
        for (v in current.neighbors)
            dfs(v, visited)
    }

    dfs(graph.vertices[0], HashSet())
}
```

å±€éƒ¨å‡½æ•°å¯ä»¥è®¿é—®å¤–éƒ¨å‡½æ•°ï¼ˆå³é—­åŒ…ï¼‰çš„å±€éƒ¨å˜é‡ï¼Œæ‰€ä»¥åœ¨ä¸Šä¾‹ä¸­ï¼Œvisited å¯ä»¥æ˜¯å±€éƒ¨å˜é‡ï¼š


``` kt
fun dfs(graph: Graph) {
    val visited = HashSet<Vertex>()
    fun dfs(current: Vertex) {
        if (!visited.add(current)) return
        for (v in current.neighbors)
            dfs(v)
    }

    dfs(graph.vertices[0])
}
```
### æˆå‘˜å‡½æ•°
æˆå‘˜å‡½æ•°æ˜¯åœ¨ç±»æˆ–å¯¹è±¡å†…éƒ¨å®šä¹‰çš„å‡½æ•°ï¼š


``` kt
class Sample {
    fun foo() { print("Foo") }
}
```
æˆå‘˜å‡½æ•°ä»¥ç‚¹è¡¨ç¤ºæ³•è°ƒç”¨ï¼š


``` kt
Sample().foo() // åˆ›å»ºç±» Sample å®ä¾‹å¹¶è°ƒç”¨ foo
```

### æ¨¡æ¿å‡½æ•°

å‡½æ•°å¯ä»¥æœ‰æ³›å‹å‚æ•°ï¼Œé€šè¿‡åœ¨å‡½æ•°åå‰ä½¿ç”¨å°–æ‹¬å·æŒ‡å®šï¼š
 
``` kt
fun <T> singletonList(item: T): List<T> { /*â€¦â€¦*/ } 
```
### å†…è”å‡½æ•°

### æ‰©å±•å‡½æ•°

### é«˜é˜¶å‡½æ•°å’Œ Lambda è¡¨è¾¾å¼


lambda è¡¨è¾¾å¼ä½¿ç”¨å®ä¾‹ï¼š

``` kt 
// æµ‹è¯•
fun main(args: Array<String>) {
    val sumLambda: (Int, Int) -> Int = {x,y -> x+y}
    println(sumLambda(1,2))  // è¾“å‡º 3
}
```

### å°¾é€’å½’å‡½æ•°

Kotlin æ”¯æŒä¸€ç§ç§°ä¸º[å°¾é€’å½’](https://zh.wikipedia.org/wiki/%E5%B0%BE%E8%B0%83%E7%94%A8)çš„å‡½æ•°å¼ç¼–ç¨‹é£æ ¼ã€‚ è¿™å…è®¸ä¸€äº›é€šå¸¸ç”¨å¾ªç¯å†™çš„ç®—æ³•æ”¹ç”¨é€’å½’å‡½æ•°æ¥å†™ï¼Œè€Œæ— å †æ ˆæº¢å‡ºçš„é£é™©ã€‚ å½“ä¸€ä¸ªå‡½æ•°ç”¨ tailrec ä¿®é¥°ç¬¦æ ‡è®°å¹¶æ»¡è¶³æ‰€éœ€çš„å½¢å¼æ—¶ï¼Œç¼–è¯‘å™¨ä¼šä¼˜åŒ–è¯¥é€’å½’ï¼Œç•™ä¸‹ä¸€ä¸ªå¿«é€Ÿè€Œé«˜æ•ˆçš„åŸºäºå¾ªç¯çš„ç‰ˆæœ¬ï¼š

ä»å‰æœ‰åº§å±±ã€‚

ä¾‹å¦‚é€’å½’æ±‚è§£é˜¶ä¹˜çš„ä¸€ä¸ªå‡½æ•°ï¼Œåœ¨ C++ä¸­ è¿™ä¹ˆå†™ï¼š
> æ²¡æœ‰å¿…è¦ç”¨é€’å½’çš„ä¸€ä¸ªé€»è¾‘ï¼Œä¸è¿‡å¡ä¸€ä¸‹è¿˜æ˜¯å¾—æƒ³ä¸€æƒ³

``` cpp 
#include <iostream>
using namespace std;
int ans = 1;
int fact(int a) {
  if (a == 1) {
    return ans;
  }
  ans *= a;
  return fact(a - 1);
}

int main() {
  int a = 5;
  cout << fact(a);
  return 0;
}
```

åŒæ ·çš„é€»è¾‘è¿‡ç¨‹ï¼Œåœ¨ kotlin ä¸­è¿™ä¹ˆå†™

```kt 
fun main(args: Array<String>) {
    val num = 5
    println(fact(num))
}

fun fact(a: Int): Int {
    if (a == 1) {
        return 1
    } else {
        return a * fact(a - 1)
    }
}
```
### BigInteger

Java.math é‡Œé¢çš„ä¸€ä¸ª class 

``` kt 
import java.math.BigInteger

fun main(args: Array<String>) {
    val num =BigInteger("70")
    println(fact(num))
}

fun fact(a: BigInteger): BigInteger {
    if (a == BigInteger.ONE) {
        return BigInteger.ONE
    } else {
        return a * fact(a - BigInteger.ONE)
    }
}
```
### å°¾é€’å½’çš„ä¼˜åŒ–

é¢‘ç¹ç´¯è®¡é€’å½’å‡½æ•°çš„æ“ä½œå°±ä¼šå¯¼è‡´ç¨‹åº **æ ˆæº¢å‡º** 

java è¯­è¨€ä¸­å‡ºç°æ ˆæº¢å‡ºåæ— æ³•å¼¥è¡¥

kotlin å¯ä»¥åœ¨å‡½æ•°åå­—å‰ä½¿ç”¨ `tailrec` å…³é”®å­—æ¥è¿›è¡Œå°¾é€’å½’ä¼˜åŒ–

```kt 
fun main(args: Array<String>) {
    println(oll_add(10000))
}

fun oll_add(num:Int):Int {
    println("è®¡ç®—æœºç¬¬${num}æ¬¡è¿ç®—")
    if (num==1){
        return 1
    }else{
        return num+oll_add(num-1)
    }
}
```

![2020-12-17-21-42-35](https://raw.githubusercontent.com/fengwei2002/Pictures_02/master/img/2020-12-17-21-42-35.png)

::: tip
æ‰€ä»¥å‘ç°ï¼Œå…‰ä½¿ç”¨ `tailrec` å…³é”®å­—è¿˜ä¸è¡Œ
:::

```kt 
fun main(args: Array<String>) {
    var result = 0
    println(oll_add(10000, result))
}

tailrec fun oll_add(num: Int, result: Int): Int {
    println("è®¡ç®—æœºç¬¬${num}æ¬¡è¿ç®—ï¼Œresult =${result}")
    if (num == 0) {
        return 1
    } else {
        return oll_add(num - 1, result + num)
    }
}
```

å°¾é€’å½’ä¼˜åŒ–è¦æ±‚å‡½æ•°è¿”å›å€¼è¿˜æ˜¯è°ƒç”¨å‡½æ•°æœ¬èº«

![2020-12-17-21-47-56](https://raw.githubusercontent.com/fengwei2002/Pictures_02/master/img/2020-12-17-21-47-56.png)

å½“ `num=10000` æ—¶ï¼š

```
è®¡ç®—æœºç¬¬ 15 æ¬¡è¿ç®—ï¼Œresult =50004880
è®¡ç®—æœºç¬¬ 14 æ¬¡è¿ç®—ï¼Œresult =50004895
è®¡ç®—æœºç¬¬ 13 æ¬¡è¿ç®—ï¼Œresult =50004909
è®¡ç®—æœºç¬¬ 12 æ¬¡è¿ç®—ï¼Œresult =50004922
è®¡ç®—æœºç¬¬ 11 æ¬¡è¿ç®—ï¼Œresult =50004934
è®¡ç®—æœºç¬¬ 10 æ¬¡è¿ç®—ï¼Œresult =50004945
è®¡ç®—æœºç¬¬ 9 æ¬¡è¿ç®—ï¼Œresult =50004955
è®¡ç®—æœºç¬¬ 8 æ¬¡è¿ç®—ï¼Œresult =50004964
è®¡ç®—æœºç¬¬ 7 æ¬¡è¿ç®—ï¼Œresult =50004972
è®¡ç®—æœºç¬¬ 6 æ¬¡è¿ç®—ï¼Œresult =50004979
è®¡ç®—æœºç¬¬ 5 æ¬¡è¿ç®—ï¼Œresult =50004985
è®¡ç®—æœºç¬¬ 4 æ¬¡è¿ç®—ï¼Œresult =50004990
è®¡ç®—æœºç¬¬ 3 æ¬¡è¿ç®—ï¼Œresult =50004994
è®¡ç®—æœºç¬¬ 2 æ¬¡è¿ç®—ï¼Œresult =50004997
è®¡ç®—æœºç¬¬ 1 æ¬¡è¿ç®—ï¼Œresult =50004999
è®¡ç®—æœºç¬¬ 0 æ¬¡è¿ç®—ï¼Œresult =50005000
```


## å­—ç¬¦ä¸²è½¬æ•°å­—

æ•°å­—å’Œå­—ç¬¦ä¸²å¯¹è±¡å­˜åœ¨ toString å’Œ toInt æ–¹æ³•

## kotlin äººæœºäº¤äº’

- æ„å¿µæ§åˆ¶
- è¯­ä¹‰äº¤äº’ï¼ˆç§‘å¤§è®¯é£ï¼‰
- å²©æ´è·Ÿè¸ªï¼ˆVRï¼‰
- ä½“æ„Ÿäº¤äº’ï¼ˆXbox ä½“æ„Ÿæ¸¸æˆï¼‰
- æ‰“å­—äº¤äº’ï¼ˆå¤„ç†è¾“å…¥è¾“å‡ºï¼‰

readLine å‡½æ•°å’Œç©ºå€¼å¤„ç†ç›¸å…³

åˆå§‹ä»£ç 

``` kt
fun main(args: Array<String>) {
    println("è¯·è¾“å…¥ç¬¬ä¸€ä¸ªæ•°å­—")
    var num1_str = readLine()
    println("è¯·è¾“å…¥ç¬¬äºŒä¸ªæ•°å­—")
    var num2_str = readLine()

    var num1 = num1_str.toInt()
    var num2 = num2_str.toInt()
}

```
ä¿®æ”¹

``` kt 
fun main(args: Array<String>) {
    println("è¯·è¾“å…¥ç¬¬ä¸€ä¸ªæ•°å­—")
    var num1_str = readLine()
    println("è¯·è¾“å…¥ç¬¬äºŒä¸ªæ•°å­—")
    var num2_str = readLine()

    var num1 = num1_str?.toInt()
    var num2 = num2_str?.toInt() //ç½®ä¸ºï¼Ÿåæ„æ€å¯ä»¥è¯»å…¥ç©ºå€¼ã€‚ç©ºå€¼å’Œç©ºå€¼ä¸å¯ä»¥ç›¸åŠ 

    println("${num1} + ${num2}=${num1 + num2}")
//æŠ¥é”™ï¼šéœ€è¦ç±»å‹ int å®é™…ç±»å‹ä¸º int? kotlin ä¸­çš„å¼ºåˆ¶ç©ºå€¼è®¾å®šå°†ä»–ä»¬ç½®ä¸ºäº†ä¸¤ç§ä¸åŒçš„æ•°æ®ç±»å‹
}

```

å†ä¿®æ”¹

``` kt
fun main(args: Array<String>) {
    println("è¯·è¾“å…¥ç¬¬ä¸€ä¸ªæ•°å­—")
    var num1_str = readLine()
    println("è¯·è¾“å…¥ç¬¬äºŒä¸ªæ•°å­—")
    var num2_str = readLine()

    var num1 = num1_str!!.toInt()//äººå·¥ç¡®ä¿è¾“å…¥è¿›æ¥çš„æ•°æ®ä¸€å®šä¸ä¼šä¸ºç©º
    var num2 = num2_str!!.toInt()

    println("${num1} + ${num2}=${num1 + num2}")
}
```

```
è¯·è¾“å…¥ç¬¬ä¸€ä¸ªæ•°å­—
2
è¯·è¾“å…¥ç¬¬äºŒä¸ªæ•°å­—
3
2 + 3=5
```

## å¼‚å¸¸å¤„ç†

`try{} catch{}` å…³é”®å­—ï¼Œå°†è¦æ£€æµ‹çš„ä»£ç æ”¾åœ¨ try çš„ä½œç”¨åŸŸä¸‹

``` kt 
try{

}catch (e:Exception){
    println("è¾“å…¥æ•°æ®æœ‰é—®é¢˜")
}
```

æ³¨æ„ï¼štry ä¸­çš„è¯­å¥ç›¸å¯¹äºå‡½æ•°æ•´ä½“ç‹¬ç«‹ï¼Œå¦‚æœ try ä¸­è¿›è¡Œå˜é‡çš„å®šä¹‰ï¼Œé‚£ä¹ˆä¹‹åä½¿ç”¨è¿™ä¸ªå˜é‡å°±ä¼šå‡ºç°å˜é‡æœªå®šä¹‰çš„é”™è¯¯
